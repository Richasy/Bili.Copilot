<?xml version="1.0" encoding="utf-8" ?>
<local:VideoPlayerControlBase
    x:Class="BiliCopilot.UI.Controls.Player.VideoPlayerWidget"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:base="using:Richasy.WinUIKernel.Share.Base"
    xmlns:controls="using:BiliCopilot.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:BiliCopilot.UI.Controls.Player"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid
        Background="{ThemeResource SmokeFillColorDefaultBrush}"
        CornerRadius="{StaticResource ControlCornerRadius}"
        RequestedTheme="Dark">
        <base:Shimmer
            MinWidth="200"
            MinHeight="72"
            CornerRadius="{StaticResource ControlCornerRadius}"
            Visibility="{x:Bind ViewModel.IsLoading, Mode=OneWay}" />
        <Button
            x:Name="WidgetButton"
            MinWidth="200"
            Padding="12,8"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            HorizontalContentAlignment="Stretch"
            VerticalContentAlignment="Stretch"
            x:Load="{x:Bind ViewModel.IsLoading, Mode=OneWay, Converter={StaticResource ObjectToBoolReverseConverter}}"
            Background="Transparent"
            BorderThickness="0"
            Command="{x:Bind ViewModel.OpenPanelCommand, Mode=OneWay}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <controls:BasicCoverImage
                    Width="100"
                    Height="68"
                    Margin="0,0,12,0"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Stretch"
                    CornerRadius="{StaticResource ControlCornerRadius}"
                    DecodeWidth="320"
                    Source="{x:Bind ViewModel.Cover, Mode=OneWay}"
                    Visibility="{x:Bind ViewModel.Cover, Mode=OneWay, Converter={StaticResource ObjectToVisibilityConverter}}" />
                <Grid Grid.Column="1" VerticalAlignment="Center">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <base:TrimTextBlock
                        FontWeight="SemiBold"
                        MaxLines="1"
                        Text="{x:Bind ViewModel.Title, Mode=OneWay}" />
                    <base:TrimTextBlock
                        Grid.Row="1"
                        Margin="0,8,0,0"
                        FontSize="12"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        MaxLines="2"
                        Text="{x:Bind ViewModel.Subtitle, Mode=OneWay}"
                        Visibility="{x:Bind ViewModel.Subtitle, Mode=OneWay, Converter={StaticResource ObjectToVisibilityConverter}}" />
                </Grid>
            </Grid>
        </Button>
    </Grid>
</local:VideoPlayerControlBase>
